import pandas as pd
import nltk
import pymorphy3
from spell_checker import SpellChecker
nltk.download('stopwords')
from pathlib import Path

BASE_DIR = Path(__file__).parent

ORFO_DATASET_PATH = BASE_DIR / "data" / "orfo_and_typos.L1_5+PHON.csv"
KARTASLOVSENT_PATH = BASE_DIR / "data" / "kartaslovsent.csv"

THRESHOLD = -0.93

replace_map = [
    {'bI': 'ы'},
    {'3.14': 'пи'},
    {'3,14': 'пи'},
    {'314': "пи"},
    
    {'α': 'а'}, {'β': 'в'}, {'γ': 'у'},
    {'δ': 'б'}, {'ε': 'е'}, {'ζ': 'з'},
    {'η': 'п'}, {'θ': 'о'}, {'ι': 'и'},
    {'κ': 'к'}, {'λ': 'л'}, {'μ': 'м'},
    {'ν': 'и'}, {'ξ': 'е'}, {'ο': 'о'},
    {'π': 'п'}, {'ρ': 'р'}, {'σ': 'о'},
    {'τ': 'т'}, {'υ': 'у'}, {'φ': 'ф'},
    {'χ': 'х'}, {'ψ': 'щ'}, {'ω': 'ш'},
    
    {'€': 'е'}, {'£': 'е'}, {'¥': 'у'}, {'©': 'с'}, {"$": "с"},
    
    {'0': 'о'}, {'1': 'и'}, {'3': 'з'}, {'4': 'ч'},
    {'5': 'б'}, {'6': 'б'}, {'7': 'т'}, {'8': 'в'}, {'9': 'д'},
    
    {'a': 'а'}, {'b': 'ь'}, {'c': 'с'}, {'d': 'д'},
    {'e': 'е'}, {'f': 'ф'}, {'g': 'д'}, {'h': 'н'},
    {'i': 'и'}, {'j': 'ж'}, {'k': 'к'}, {'l': 'л'},
    {'m': 'м'}, {'n': 'н'}, {'o': 'о'}, {'p': 'р'},
    {'q': 'ку'}, {'r': 'г'}, {'s': 'с'}, {'t': 'т'},
    {'u': 'и'}, {'v': 'в'}, {'w': 'ш'}, {'x': 'х'},
    {'y': 'у'}, {'z': 'з'},
    
    {'A': 'А'}, {'B': 'В'}, {'C': 'С'}, {'D': 'Д'},
    {'E': 'Е'}, {'F': 'Ф'}, {'G': 'Д'}, {'H': 'Н'},
    {'I': 'И'}, {'J': 'Ж'}, {'K': 'К'}, {'L': 'Л'},
    {'M': 'М'}, {'N': 'Н'}, {'O': 'О'}, {'P': 'Р'},
    {'Q': 'КУ'}, {'R': 'Я'}, {'S': 'С'}, {'T': 'Т'},
    {'U': 'У'}, {'V': 'В'}, {'W': 'Ш'}, {'X': 'Х'},
    {'Y': 'У'}, {'Z': 'З'},
    
    {'6': 'б'}, {'@': 'а'}, {"1": "и"}, {"*": "ж"}, {'\'': "ь"}
]

mat_regex = r"""(?iux)(?<![а-яё])(?:
# Исходные матерные паттерны (с поддержкой дефисов и пробелов)
(?:(?:у|[- ]*[нз][- ]*а|(?:х[- ]*и[- ]*т[- ]*р[- ]*о|н[- ]*е)?[- ]*в[- ]*з?[- ]*[ыьъ]|[- ]*с[- ]*[ьъ]|(?:и|р[- ]*а)[- ]*[зс][- ]*ъ?|(?:о[- ]*[тб]|п[- ]*[оа][- ]*д)[- ]*[ьъ]?|(?:\S(?=[а-яё]))+?[- ]*[оаеи][- ]*)[- ]*)?(?:
  [- ]*[её][- ]*(?:[- ]*б(?![- ]*о[- ]*[рй]|[- ]*р[- ]*а[- ]*ч)|[- ]*п[- ]*[уа][- ]*(?:[- ]*ц|[- ]*т[- ]*с))|
  [- ]*и[- ]*[пб][- ]*[ае][- ]*[тцд][- ]*[ьъ]
).*?|

(?:(?:н[- ]*[иеа]|(?:р[- ]*а|и)[- ]*[зс]|[- ]*[зд][- ]*?[ао][- ]*(?:т|д[- ]*н[- ]*[оа])?|[- ]*с[- ]*(?:м[- ]*[еи])?|[- ]*а[- ]*[пб][- ]*ч|[- ]*в[- ]*[ъы]?|[- ]*п[- ]*р[- ]*[еи])[- ]*)?х[- ]*у(?:[- ]*[яйиеёю]|[- ]*л+[- ]*и(?!г[- ]*а[- ]*н)).*?|

б[- ]*л(?:[- ]*[эя]|[- ]*е[- ]*а?)(?:[- ]*[дт][- ]*[ьъ]?)?|

\S*?(?:
  п[- ]*(?:
    (?:[- ]*[иеё][- ]*[зс][- ]*д|[- ]*з[- ]*д)[- ]*(?:[- ]*[еёц])? |  
    [- ]*[иеё][- ]*з[- ]*д|  
    [- ]*и[- ]*д[- ]*[аое][- ]*?р|
    [- ]*е[- ]*д(?:[- ]*р(?![- ]*о)|[- ]*[аое][- ]*р|[- ]*и[- ]*к)|
    [- ]*о[- ]*х[- ]*у[- ]*ю
  )|
  б[- ]*л[- ]*я(?:[- ]*[дбц]|[- ]*т[- ]*с)|
  [- ]*[ое][- ]*х[- ]*у[- ]*[яйиеё]|
  х[- ]*у[- ]*й[- ]*н
).*?|

(?:о[- ]*[тб]?|п[- ]*р[- ]*о|н[- ]*а|в[- ]*ы)?м[- ]*(?:
  а[- ]*н[- ]*д(?:[- ]*[ауеыий](?:[- ]*л(?:[- ]*и[- ]*[сзщ])?[- ]*[ауеийы])?|[- ]*о[- ]*й|[- ]*[ао][- ]*в.*?|[- ]*ю[- ]*к(?:[- ]*о[- ]*в|[- ]*[ауий])?|[- ]*е[- ]*[нт][- ]*ь|[- ]*и[- ]*щ[- ]*а)|
  у[- ]*д(?:[- ]*[яаийое].+?|[- ]*е?[- ]*н(?:[- ]*[ьюийя]|[- ]*е[- ]*й))|
  [- ]*[ао][- ]*л[- ]*[ао][- ]*ф[- ]*[ьъ](?:[- ]*[яийюе]|[- ]*[её][- ]*о[- ]*й)
)|

е[- ]*л[- ]*д[- ]*[ауые].*?|
л[- ]*я[- ]*[тд][- ]*ь|
(?:[- ]*[нз][- ]*а|п[- ]*о)[- ]*х|

# Грубые/оскорбительные слова (не мат)
# 1. Общие оскорбления
(?:у[- ]*р[- ]*о[- ]*д[- ]*[а-яё-]*|д[- ]*[эеи][- ]*б[- ]*и[- ]*[лчв][- ]*[а-яё-]*|д[- ]*а[- ]*у[- ]*н[- ]*[а-яё-]*|к[- ]*р[- ]*е[- ]*т[- ]*[ий][- ]*н[- ]*[а-яё-]*|[ий][- ]*д[- ]*[ио][- ]*[ао][- ]*т[- ]*[а-яё-]*|д[- ]*о[- ]*л[- ]*б[- ]*о[- ]*[ёе][- ]*б[- ]*[а-яё-]*|
п[- ]*р[- ]*[ий][- ]*д[- ]*у[- ]*р[- ]*[а-яё-]*|о[- ]*т[- ]*м[- ]*о[- ]*р[- ]*о[- ]*з[- ]*[а-яё-]*|г[- ]*н[- ]*и[- ]*д[- ]*[а-яё-]*|п[- ]*о[- ]*д[- ]*о[- ]*н[- ]*[а-яё-]*|о[- ]*т[- ]*б[- ]*р[- ]*о[- ]*с[- ]*[а-яё-]*|м[- ]*е[- ]*р[- ]*з[- ]*а[- ]*в[- ]*[а-яё-]*|
н[- ]*е[- ]*г[- ]*о[- ]*д[- ]*я[- ]*[йя][- ]*[а-яё-]*|п[- ]*о[- ]*д[- ]*л[- ]*е[- ]*ц[- ]*[а-яё-]*|[ий][- ]*с[- ]*ч[- ]*а[- ]*д[- ]*[ий][- ]*[а-яё-]*|ч[- ]*м[- ]*[оыа][- ]*[а-яё-]*|л[- ]*[оу][- ]*[хш][- ]*[а-яё-]*|
п[- ]*а[- ]*д[- ]*л[- ]*[уайея][- ]*|п[- ]*а[- ]*д[- ]*л[- ]*ю[- ]*[кг][- ]*[а-яё-]*|и[- ]*м[- ]*б[- ]*и[- ]*ц[- ]*и[- ]*л[- ]*[а-яё-]*|
д[- ]*у[- ]*р[- ]*[а-яё]*|м[- ]*у[- ]*д(?:[а-яё-]+[а-яё-]|[- ]*[^а-яё-])[а-яё-]*|[а-яё-]*х[- ]*е[- ]*р[- ]*[а-яё-]*)|

# 2. Животные-оскорбления
(?:с[- ]*к[- ]*о[- ]*т[- ]*[ий][- ]*н[- ]*[а-яё-]*|п[- ]*с[- ]*[ий][- ]*н[- ]*[а-яё-]*|с[- ]*в[- ]*[ий][- ]*н[- ]*ь[- ]*[яий][- ]*[а-яё-]*|о[- ]*в[- ]*ц[- ]*[аеы][- ]*[а-яё-]*|к[- ]*о[- ]*з[- ]*[ёе][- ]*л[- ]*[а-яё-]*|б[- ]*з[- ]*д[- ]*[а-яё-]*|
о[- ]*б[- ]*о[- ]*р[- ]*м[- ]*о[- ]*т[- ]*[а-яё-]*|б[- ]*а[- ]*р[- ]*а[- ]*н[- ]*[а-яё-]*|[оа][- ]*с[- ]*[её][- ]*л[- ]*|[оа][- ]*с[- ]*л[- ]*[ыуаоми]*|к[- ]*о[- ]*з[- ]*л[- ]*[а-яё-]*)|

# 3. Сексуально-оскорбительные и разврат
(?:ш[- ]*л[- ]*ю[- ]*х[- ]*[а-яё-]*|п[- ]*р[- ]*о[- ]*с[- ]*т[- ]*[ий][- ]*т[- ]*у[- ]*[а-яё-]*|б[- ]*л[- ]*у[- ]*д[- ]*н[- ]*[ий][- ]*ц[- ]*[а-яё-]*|р[- ]*а[- ]*з[- ]*в[- ]*р[- ]*а[- ]*т[- ]*н[- ]*[ий][- ]*к[- ]*[а-яё-]*|п[- ]*о[- ]*х[- ]*о[- ]*т[- ]*[а-яё-]*|б[- ]*л[- ]*я[- ]*д[- ]*[а-яё-]*|
с[- ]*о[- ]*д[- ]*о[- ]*м[- ]*[а-яё-]*|г[- ]*о[- ]*м[- ]*о[- ]*с[- ]*е[- ]*к[- ]*[а-яё-]*|п[- ]*е[- ]*д[- ]*о[- ]*ф[- ]*[ий][- ]*л[- ]*[а-яё-]*|и[- ]*з[- ]*в[- ]*р[- ]*а[- ]*щ[- ]*е[- ]*н[- ]*[а-яё-]*|п[- ]*р[- ]*[ио][- ]*с[- ]*т[- ]*[ио][- ]*т[- ]*[а-яё-]*|с[- ]*е[- ]*к[- ]*с[- ]*о[- ]*т[- ]*[а-яё-]*|
т[- ]*р[- ]*а[- ]*х[- ]*[а-яё]*|е[- ]*б[- ]*[а-яё-]*|п[- ]*о[- ]*р[- ]*н[- ]*о[- ]*[а-яё-]*|в[- ]*а[- ]*г[- ]*[ий][- ]*н[- ]*[а-яё-]*|ч[- ]*л[- ]*е[- ]*н[- ]*[а-яё-]*|[а-яё-]*с[- ]*[оа][- ]*с[- ]*[аиеёй][- ]*[а-яё-]*|[а-яё-]*ж[- ]*о[- ]*п[- ]*[а-яё-]*|б[- ]*л[- ]*у[- ]*д[- ]*[а-яё-]*|б[- ]*л[- ]*у[- ]*д[- ]*н[- ]*[ий][- ]*к[- ]*[а-яё-]*|
м[- ]*[ий][- ]*н[- ]*е[- ]*т[- ]*[а-яё-]*|г[- ]*[оа][- ]*н[- ]*д[- ]*о[- ]*н[- ]*[а-яё-]*|м[- ]*[ий][- ]*н[- ]*ь[- ]*е[- ]*т[- ]*|п[- ]*е[- ]*н[- ]*и[- ]*с[- ]*[а-яё-]*|[а-яё-]*з[- ]*а[- ]*л[- ]*у[- ]*п[- ]*[а-яё-]*)|

# 4. Алкоголь и наркотики
(?:а[- ]*л[- ]*к[- ]*а[- ]*ш[- ]*[а-яё-]*|п[- ]*ь[- ]*я[- ]*н[- ]*[а-яё-]*|б[- ]*у[- ]*х[- ]*л[- ]*[аио][- ]*[а-яё-]*|н[- ]*а[- ]*р[- ]*к[- ]*о[- ]*м[- ]*а[- ]*н[- ]*[а-яё-]*|д[- ]*о[- ]*з[- ]*[а-яё-]*|г[- ]*е[- ]*р[- ]*о[- ]*(?:[ий](?!ня)[- ]*н[- ]*[а-яё-]*|й[- ]*н[- ]*[а-яё-]*)|
к[- ]*о[- ]*к[- ]*с[- ]*[а-яё-]*|а[- ]*н[- ]*а[- ]*ш[- ]*[а-яё-]*|с[- ]*п[- ]*а[- ]*[ий][- ]*с[- ]*[а-яё-]*|ш[- ]*[ий][- ]*р[- ]*[а-яё-]*|т[- ]*о[- ]*р[- ]*ч[- ]*[а-яё-]*|д[- ]*р[- ]*ю[- ]*ч[- ]*[а-яё-]*|к[- ]*о[- ]*л[- ]*[ёе][- ]*ц[- ]*[а-яё-]*|
м[- ]*а[- ]*р[- ]*[ий][- ]*х[- ]*у[- ]*а[- ]*н[- ]*[а-яё-]*|г[- ]*а[- ]*ш[- ]*[а-яё-]*|п[- ]*[ао][- ]*р[- ]*н[- ]*[а-яё-]*|з[- ]*а[- ]*к[- ]*л[- ]*а[- ]*д[- ]*[а-яё-]*|д[- ]*р[- ]*я[- ]*н[- ]*ь[- ]*[а-яё-]*|
[а-яё-]*д[- ]*р[- ]*[ао][- ]*[чт][- ]*[а-яё-]*|н[- ]*а[- ]*р[- ]*к[- ]*о[- ]*[шт][- ]*[а-яё-]*)|
# 5. Социальные оскорбления
(?:б[- ]*о[- ]*м[- ]*ж[- ]*[а-яё-]*|п[- ]*а[- ]*р[- ]*а[- ]*з[- ]*[ий][- ]*т[- ]*[а-яё-]*|ш[- ]*а[- ]*р[- ]*о[- ]*м[- ]*ы[- ]*ж[- ]*н[- ]*[ий][- ]*к[- ]*[а-яё-]*|у[- ]*б[- ]*л[- ]*ю[- ]*д[- ]*[а-яё-]*|в[- ]*ы[- ]*б[- ]*л[- ]*я[- ]*д[- ]*[а-яё-]*|б[- ]*и[- ]*ч[- ]*[а-яё-]*)|

# 6. "Грязные" слова
(?:[гж][- ]*а[- ]*[вф][- ]*н[- ]*[аоы]|[а-яё-]*г[- ]*[ао][- ]*в[- ]*н[- ]*[а-яё-]*[- ]*|г[- ]*[оа][- ]*в[- ]*е[- ]*н[- ]*[а-яё-]*|г[- ]*[ао][- ]*в[- ]*н[- ]*ю[- ]*[кч]|д[- ]*е[- ]*р[- ]*ь[- ]*м[- ]*[аоуы]|д[- ]*е[- ]*р[- ]*[ьъ][- ]*м[- ]*[аоу]|д[- ]*[еи][- ]*р[- ]*ь[- ]*м[- ]*[а-яё-]*)|

# 7. Оскорбления женского рода (обновлено)
(?:с[- ]*[ую][- ]*[кч][- ]*[аинуекой]*|с[- ]*у[- ]*ч[- ]*[аиьо][- ]*[йея]|с[- ]*у[- ]*ч[- ]*к[- ]*[аиу]|с[- ]*у[- ]*ч[- ]*ь[- ]*[еяий]|с[- ]*т[- ]*е[- ]*р[- ]*в[- ]*[а-яё-]*|х[- ]*р[- ]*ы[- ]*ч[- ]*[а-яё-]*|
ш[- ]*м[- ]*а[- ]*р[- ]*[а-яё-]*|ш[- ]*в[- ]*а[- ]*л[- ]*[а-яё-]*|ш[- ]*л[- ]*ю[- ]*х[- ]*[а-яё-]*|б[- ]*л[- ]*я[- ]*д[- ]*[а-яё-]*|п[- ]*о[- ]*т[- ]*а[- ]*с[- ]*к[- ]*[а-яё-]*|п[- ]*р[- ]*[оа][- ]*л[- ]*[её][- ]*т[- ]*к[- ]*[а-яё-]*|с[- ]*у[- ]*ч[- ]*а[- ]*р[- ]*[а-яё-]*)|

# Еще
(?:д[- ]*а[- ]*в[- ]*а[- ]*л[- ]*к[- ]*[а-яё-]*|
   п[- ]*е[- ]*т[- ]*у[- ]*[хш][- ]*[а-яё-]*|
   р[- ]*у[- ]*к[- ]*о[- ]*б[- ]*л[- ]*у[- ]*д[- ]*[а-яё-]*|
   [а-яё-]*с[- ]*с[- ]*[аыу][- ]*[а-яё-]*|
   в[- ]*л[- ]*а[- ]*г[- ]*а[- ]*л[- ]*и[- ]*щ[- ]*[а-яё-]*|
   [а-яё-]*п[- ]*е[- ]*р[- ]*д[- ]*[а-яё-]*|
   м[- ]*а[- ]*л[- ]*а[- ]*ф[- ]*ь[- ]*[а-яё-]*|
   г[- ]*о[- ]*м[- ]*и[- ]*к[- ]*[а-яё-]*|
   п[- ]*и[- ]*л[- ]*о[- ]*т[- ]*к[- ]*[а-яё-]*|
   а[- ]*н[- ]*у[- ]*с[- ]*[а-яё-]*|
   п[- ]*у[- ]*т[- ]*а[- ]*н[- ]*[ыа-]*[а-яё-]|
   ш[- ]*а[- ]*л[- ]*а[- ]*в[- ]*[а-яё-]*|
   м[- ]*о[- ]*ш[- ]*о[- ]*н[- ]*к[- ]*[а-яё-]*|
   е[- ]*л[- ]*д[- ]*[ао][- ]*[а-яё-]*|
   [а-яё-]*с[- ]*р[- ]*а[- ]*[тницклч][- ]*[а-яё-]*|
   [а-яё-]*д[- ]*р[- ]*[еи][- ]*[сщ][- ]*[а-яё-]*|
   [а-яё-]*д[- ]*р[- ]*и[- ]*[сщ][- ]*[а-яё-]*|
   с[- ]*п[- ]*[еи][- ]*[р][- ]*[м][- ]*[а-яё-]*|
   д[- ]*[оа][- ]*[л][- ]*[б][- ]*[оа][- ]*[а-яё-]*|
   [ао][- ]*[н][- ]*[а][- ]*[л][- ]*[ауомыь][- ]*[а-яё-]*|
   [х][- ]*[р][- ]*[е][- ]*[н][- ]*[ьи][- ]*[а-яё-]*|
   [а-яё-]*с[- ]*[еёи][- ]*р[- ]*|
   [а-яё-]*с[- ]*[еёи][- ]*р[- ]*[с][- ]*[а-яё-]*|
   [а-яё-]*с[- ]*[еёи][- ]*р[- ]*[аиес][- ]*[тцлеи][- ]*[а-яё-]*|
   [оа][- ]*[л][- ]*[ие][- ]*[г][- ]*[оа][- ]*[ф][- ]*[р][- ]*[а-яё-]*|
	[ш][- ]*[аои][- ]*[п][- ]*[ао][- ]*[в][- ]*[ь][- ]*[а-яё-]*|
    [ш][- ]*[п][- ]*[а][- ]*[к][- ]*[а-яё-]*|
    [х][- ]*[оа][- ]*[х][- ]*[о][- ]*[л][- ]*[а-яё-]*|
    [х][- ]*[оа][- ]*[х][- ]*[л][- ]*[а-яё-]*|
    ж[- ]*л[- ]*о[- ]*б[- ]*[а-яё-]*|
    т[- ]*в[- ]*[оа][- ]*р[- ]*[иь][- ]*[а-яё-]*|
	т[- ]*у[- ]*п[- ]*и[- ]*ц[- ]*[а-яё-]*|
    в[- ]*ы[- ]*р[- ]*[ао][- ]*д[- ]*о[- ]*к[- ]*[а-яё-]*|
    б[- ]*[оа][- ]*л[- ]*в[- ]*а[- ]*н[- ]*[а-яё-]*|
    о[- ]*л[- ]*у[- ]*х[- ]*[а-яё-]*|
    б[- ]*а[- ]*л[- ]*а[- ]*м[- ]*о[- ]*ш[- ]*к[- ]*[а-яё-]*|
    ч[- ]*у[- ]*р[- ]*к[- ]*[а-яё-]*|
    ж[- ]*и[- ]*д[- ]*[а-яё-]*|
    к[- ]*а[- ]*ц[- ]*а[- ]*п[- ]*[а-яё-]*|
    ч[- ]*у[- ]*х[- ]*а[- ]*н[- ]*[а-яё-]*|
    п[- ]*[еи][- ]*н[- ]*д[- ]*о[- ]*с[- ]*[а-яё-]*|
    б[- ]*а[- ]*н[- ]*д[- ]*е[- ]*р[- ]*[а-яё-]*|
    в[- ]*а[- ]*т[- ]*н[- ]*и[- ]*к[- ]*[а-яё-]*|
    б[- ]*и[- ]*о[- ]*м[- ]*а[- ]*с[- ]*с[- ]*[а-яё-]*|
    [а-яё-]*м[- ]*у[- ]*с[- ]*[оа][- ]*[р][- ]*[а-яё-]*|
    м[- ]*[еи][- ]*н[- ]*[т][- ]*[а-яё-]*|
    б[- ]*и[- ]*о[- ]*о[- ]*т[- ]*х[- ]*о[- ]*д[- ]*[а-яё-]*|
    [а-яё-]*м[- ]*о[- ]*ч[- ]*[аё][- ]*[а-яё-]*|
    к[- ]*а[- ]*л[- ]*[а-яё-]*|
    д[- ]*н[- ]*о[- ]*[а-яё-]*|
    о[- ]*т[- ]*р[- ]*е[- ]*б[- ]*ь[- ]*[ея][- ]*[а-яё-]*|
    т[- ]*р[- ]*о[- ]*л[- ]*[а-яё-]*|
    х[- ]*е[- ]*й[- ]*т[- ]*[еи][- ]*р[- ]*[а-яё-]*|
    к[- ]*л[- ]*о[- ]*у[- ]*н[- ]*[а-яё-]*|
    ш[- ]*[аи][- ]*р[- ]*л[- ]*[ао][- ]*т[- ]*а[- ]*н[- ]*[а-яё-]*|
    ш[- ]*[ие][- ]*з[- ]*[а-яё-]*|
    ю[- ]*р[- ]*о[- ]*д[- ]*и[- ]*в[- ]*[ыий][- ]*[а-яё-]*|
    у[- ]*[зс][- ]*к[- ]*[оа][- ]*г[- ]*л[- ]*а[- ]*з[- ]*[а-яё-]*|
    з[- ]*а[- ]*д[- ]*н[- ]*[ие][- ]*ц[- ]*[а-яё-]*|
    ч[- ]*у[- ]*ч[- ]*е[- ]*л[- ]*о[- ]*[а-яё-]*|
    г[- ]*а[- ]*д[- ]*[еи][- ]*н[- ]*[а-яё-]*|
    г[- ]*а[- ]*д[- ]*[а-яё-]*|
    б[- ]*е[- ]*з[- ]*м[- ]*о[- ]*з[- ]*г[- ]*л[- ]*[а-яё-]*|
    п[- ]*р[- ]*и[- ]*м[- ]*а[- ]*т[- ]*[а-яё-]*|
    о[- ]*б[- ]*е[- ]*з[- ]*ь[- ]*я[- ]*н[- ]*а-яё-]*|
    н[- ]*[еи][- ]*г[- ]*р[- ]*[а-яё-]*|
    н[- ]*[еи][- ]*г[- ]*г[- ]*е[- ]*р[- ]*[а-яё-]*|
    д[- ]*е[- ]*г[- ]*р[- ]*[ао][- ]*д[- ]*[а-яё-]*|
    д[- ]*е[- ]*г[- ]*р[- ]*о[- ]*[еи][- ]*д[- ]*[а-яё-]*|
    ж[- ]*и[- ]*р[- ]*т[- ]*р[- ]*е[- ]*с[- ]*[а-яё-]*|
    д[- ]*р[- ]*ы[- ]*[хщ][- ]*[а-яё-]*|
    н[- ]*и[- ]*щ[- ]*[еи][- ]*б[- ]*р[- ]*о[- ]*д[- ]*[а-яё-]*|
    н[- ]*и[- ]*щ[- ]*[еи][- ]*[ё][- ]*б[- ]*[а-яё-]*|
    м[- ]*а[- ]*к[- ]*а[- ]*к[- ]*[а-яё-]*|
    ж[- ]*и[- ]*р[- ]*[оа][- ]*б[- ]*а[- ]*с[- ]*[а-яё-]*|
    с[- ]*т[- ]*а[- ]*р[- ]*п[- ]*е[- ]*р[- ]*[а-яё-]*|
    м[- ]*о[- ]*л[- ]*о[- ]*к[- ]*о[- ]*с[- ]*[а-яё-]*|
    ч[- ]*[ие][- ]*р[- ]*н[- ]*у[- ]*х[- ]*[а-яё-]*|
    [её][- ]*[п][- ]*|
    [её][- ]*[п][- ]*[т][- ]*[а-яё-]*|
    [й][- ]*[о][- ]*[п][- ]*[т][- ]*[а-яё-]*|
    [й][- ]*[о][- ]*[б][- ]*[а-яё-]*|
    [к][- ]*[у][- ]*[р][- ]*[в][- ]*[а-яё-]*|
    [к][- ]*[у][- ]*[р][- ]*[и][- ]*[ц][- ]*[а-яё-]*|
    б[- ]*а[- ]*б[- ]*[аыуомий]*|
    ш[- ]*к[- ]*у[- ]*р[- ]*[аыуомий]*|
    [а-яё-]*с[- ]*к[- ]*а[- ]*м[- ]*[илатьре]*|
   	[иы][- ]*м[- ]*б[- ]*[еи][- ]*ц[- ]*[а-яё-]*|
    п[- ]*[ао][- ]*д[- ]*л[- ]*[оума]*|
    з[- ]*в[- ]*е[- ]*з[- ]*д[- ]*е[- ]*[лтжьиаш]*|
    ч[- ]*[её][- ]*р[- ]*т[- ]*|
    г[- ]*р[- ]*я[- ]*з[- ]*[а-яё-]*|
    г[- ]*е[- ]*[йию][- ]*[а-яё-]*|
    [а-яё-]*г[- ]*н[- ]*и[- ]*[еёлв][- ]*[а-яё-]*|
    [а-яё-]*с[- ]*к[- ]*у[- ]*ф[- ]*[а-яё-]*|
    м[- ]*е[- ]*ф[- ]*[а-яё-]*|
    о[- ]*т[- ]*с[- ]*т[- ]*о[- ]*й[- ]*|
    [оа][- ]*м[- ]*е[- ]*р[- ]*з[- ]*[а-яё-]*|
    [ам][- ]*м[- ]*е[- ]*р[- ]*[ыуома]|
    [а-яё-]*г[- ]*а[- ]*[дж][- ]*[а-яё-]*|
    о[- ]*б[- ]*и[- ]*ж[- ]*[еи][- ]*н[- ]*к[- ]*[а-яё-]*|
    ф[- ]*[ие][- ]*к[- ]*а[- ]*л[- ]*[а-яё-]*|
    [а-яё-]*р[- ]*ы[- ]*г[- ]*[а-яё-]*|
    [а-яё-]*б[- ]*л[- ]*[июе][- ]*[вю][- ]*[а-яё-]*|
    л[- ]*[ие][- ]*б[- ]*[ие][- ]*р[- ]*[ао][- ]*[сш][- ]*[а-яё-]*|
    п[- ]*[оа][- ]*р[- ]*а[- ]*ш[- ]*[а-яё-]*|
    п[- ]*[оа][- ]*д[- ]*л[- ]*[ю][- ]*[а-яё-]*|
    [а-яё-]*х[- ]*у[- ]*л[- ]*[еи][- ]*[а-яё-]*|
    [а-яё-]*х[- ]*у[- ]*[еюйё][- ]*[- ]*[а-яё-]*|
    б[- ]*л[- ]*[я][- ]*[- ]*[а-яё-]*|
    [а-яё-]*т[- ]*р[- ]*а[- ]*х[- ]*[- ]*[а-яё-]*|
    [а-яё-]*[оа][- ]*н[- ]*[оа][- ]*[н][- ]*[а-яё-]*|
    [а-яё-]*ц[- ]*е[- ]*л[- ]*к[- ]*[а-яё-]*|
    [а-яё-]*д[- ]*е[- ]*в[- ]*с[- ]*т[- ]*в[- ]*[а-яё-]*|
    с[- ]*е[- ]*к[- ]*с[- ]*[а-яё-]*|
    л[- ]*г[- ]*б[- ]*т[- ]*|
    в[- ]*и[- ]*ч[- ]*[а-яё-]*|
    с[- ]*п[- ]*[ие][- ]*д[- ]*[а-яё-]*|
    с[- ]*[ие][- ]*ф[- ]*[аие][- ]*[кл][- ]*[а-яё-]*|
    щ[- ]*[ие][- ]*г[- ]*о[- ]*л[- ]*[а-яё-]*|
    щ[- ]*[ие][- ]*г[- ]*л[- ]*[а-яё-]*|
    д[- ]*я[- ]*т[- ]*е[- ]*л[- ]*|
    д[- ]*я[- ]*т[- ]*л[- ]*[а-яё-]*|
    б[- ]*а[- ]*л[- ]*б[- ]*е[- ]*с[- ]*[а-яё-]*|
    б[- ]*а[- ]*р[- ]*ы[- ]*[гж][- ]*[а-яё-]*|
    б[- ]*р[- ]*е[- ]*х[- ]*у[- ]*н[- ]*[а-яё-]*|
    б[- ]*р[- ]*е[- ]*х[- ]*н[- ]*[а-яё-]*|
    г[- ]*р[- ]*у[- ]*б[- ]*[а-яё-]*|
    з[- ]*ю[- ]*з[- ]*[а-яё-]*|
    к[- ]*р[- ]*и[- ]*в[- ]*л[- ]*я[- ]*[а-яё-]*|
    п[- ]*о[- ]*з[- ]*[её][- ]*р[- ]*|
    к[- ]*в[- ]*а[- ]*д[- ]*р[- ]*о[- ]*б[- ]*е[- ]*р[- ]*[а-яё-]*|
    м[- ]*е[- ]*г[- ]*е[- ]*р[- ]*[а-яё-]*|
    н[- ]*а[- ]*х[- ]*а[- ]*л[а-яё-]*|
    [ао][- ]*б[- ]*[ао][- ]*л[- ]*д[- ]*у[- ]*[а-яё-]*|
    [а-яё-]*п[- ]*а[- ]*к[- ]*о[- ]*с[- ]*т[- ]*[а-яё-]*|
    п[- ]*а[- ]*с[- ]*к[- ]*у[- ]*д[- ]*[а-яё-]*|
    п[- ]*и[- ]*ж[- ]*о[- ]*н[- ]*[а-яё-]*|
    п[- ]*[ао][- ]*г[- ]*[а][- ]*н[- ]*[а-яё-]*|
    
    п[- ]*[ао][- ]*т[- ]*[ао][- ]*с[- ]*к[- ]*у[- ]*х[- ]*[а-яё-]*| 
	п[- ]*р[- ]*[ао][- ]*ф[- ]*у[- ]*р[- ]*[а-яё-]*|          
	п[- ]*р[- ]*[ао][- ]*ф[- ]*у[- ]*р[- ]*с[- ]*е[- ]*т[- ]*к[- ]*[а-яё-]*|  
	п[- ]*р[- ]*[fj][- ]*ш[- ]*м[- ]*а[- ]*н[- ]*д[- ]*о[- ]*в[- ]*к[- ]*[а-яё-]*|  
	ш[- ]*[оа][- ]*л[- ]*а[- ]*в[- ]*[а-яё-]*|                  
	ш[- ]*л[- ]*ю[- ]*[шх][- ]*[а-яё-]*|                        
	ш[- ]*м[- ]*а[- ]*р[- ]*[а-яё-]*|                       
	р[- ]*а[- ]*с[- ]*ш[- ]*и[- ]*в[- ]*о[- ]*х[- ]*[а-яё-]*|  
    ш[- ]*[оа][- ]*б[- ]*о[- ]*л[- ]*д[- ]*[а-яё-]*| 

    р[- ]*в[- ]*а[- ]*н[- ]*[ьь][- ]*[а-яё-]*|              
	с[- ]*т[- ]*е[- ]*р[- ]*в[- ]*е[- ]*ц[- ]*[а-яё-]*|      
	с[- ]*т[- ]*е[- ]*р[- ]*в[- ]*[а-яё-]*|                 
	с[- ]*в[- ]*о[- ]*л[- ]*о[- ]*ч[- ]*[уньь][- ]*[а-яё-]*|   
	[а-яё-]*х[- ]*а[- ]*м[- ]*[а-яё-]*|                              
	х[- ]*м[- ]*ы[- ]*р[- ]*[ьь][- ]*[а-яё-]*|              
	х[- ]*[ао][- ]*л[- ]*у[- ]*й[- ]*[а-яё-]*|                  
	ш[- ]*[оаеиы][- ]*н[- ]*т[- ]*р[- ]*[ао][- ]*п[- ]*[а-яё-]*|     
	ш[- ]*е[- ]*л[- ]*ь[- ]*м[- ]*[а-яё-]*|                  
	ш[- ]*п[- ]*[оа][- ]*н[- ]*[а-яё-]*|                       
	у[- ]*р[- ]*к[- ]*[а-яё-]*|                              
	ф[- ]*р[- ]*а[- ]*е[- ]*р[- ]*[а-яё-]*|                 
	ф[- ]*у[- ]*ф[- ]*л[- ]*[аыо][- ]*[а-яё-]*|  
    ф[- ]*у[- ]*ф[- ]*е[- ]*л[- ]*[а-яё-]*| 
    
    ч[- ]*у[- ]*х[- ]*а[- ]*н[- ]*[а-яё-]*| 
    ч[- ]*у[- ]*ш[- ]*п[- ]*а[- ]*н[- ]*[а-яё-]*| 
    
    р[- ]*а[- ]*з[- ]*з[- ]*я[- ]*в[- ]*[а-яё-]*|          
	т[- ]*р[- ]*е[- ]*п[- ]*л[- ]*[а-яё-]*|           
	ф[- ]*и[- ]*н[- ]*т[- ]*и[- ]*ф[- ]*л[- ]*ю[- ]*ш[- ]*к[- ]*[а-яё-]*|  
	ч[- ]*у[- ]*в[- ]*ы[- ]*р[- ]*л[- ]*[а-яё-]*|      
	ч[- ]*у[- ]*ч[- ]*е[- ]*л[- ]*[а-яё-]*|           
	ш[- ]*в[- ]*а[- ]*б[- ]*р[- ]*[а-яё-]*|                
	ш[- ]*е[- ]*л[- ]*у[- ]*п[- ]*о[- ]*н[- ]*[ьь][- ]*[а-яё-]*|  
	ш[- ]*и[- ]*б[- ]*з[- ]*д[- ]*и[- ]*к[- ]*[а-яё-]*|      
	ш[- ]*к[- ]*у[- ]*р[- ]*[а-яё-]*|                       
	ш[- ]*у[- ]*ш[- ]*е[- ]*р[- ]*[а-яё-]*| 
    ш[- ]*м[- ]*[ао][- ]*к[- ]*[оа][- ]*д[- ]*[а-яё-]*| 

	г[- ]*[еи][- ]*м[- ]*[ао][- ]*р[- ]*р[- ]*о[- ]*й[- ]*[а-яё-]*| 
	д[- ]*[еи][- ]*с[- ]*т[- ]*р[- ]*о[- ]*ф[- ]*[а-яё-]*|  
	я[- ]*з[- ]*в[- ]*[а-яё-]*|                             
    
    к[- ]*в[- ]*а[- ]*с[- ]*и[- ]*[а-яё-]*|  
	п[- ]*р[- ]*о[- ]*п[- ]*о[- ]*й[- ]*ц[- ]*[а-яё-]*|      
	х[- ]*[оа][- ]*н[- ]*ы[- ]*г[- ]*[а-яё-]*|    
    
    а[- ]*л[- ]*к[- ]*о[- ]*н[- ]*а[- ]*[вф][- ]*т[- ]*[а-яё-]*|  
	б[- ]*у[- ]*з[- ]*и[- ]*т[- ]*[ьь][- ]*[а-яё-]*|  
    
    л[- ]*е[- ]*г[- ]*а[- ]*в[- ]*[а-яё-]*| 
    с[- ]*о[- ]*л[- ]*д[- ]*а[- ]*ф[- ]*о[- ]*н[- ]*[а-яё-]*|
    с[- ]*у[- ]*т[- ]*[ие][- ]*н[- ]*[её][- ]*р[- ]*[а-яё-]*|
    в[- ]*ш[- ]*и[- ]*в[- ]*[а-яё-]*|
    о[- ]*л[- ]*е[- ]*н[- ]*[а-яё-]*|
    к[- ]*р[- ]*ы[- ]*с[- ]*[а-яё-]*|
    м[- ]*ы[- ]*ш[- ]*[а-яё-]*|
    ш[- ]*[оа][- ]*ф[- ]*е[- ]*|
    [а-яё-]*п[- ]*[оа][- ]*д[- ]*л[- ]*[а-яё-]*|
    [а-яё-]*с[- ]*т[- ]*[её][- ]*б[- ]*[а-яё-]*|
    
)(?![а-яё])|

# 8. Другие
(?:х[- ]*а[- ]*м[- ]*[а-яё-]*|х[- ]*а[- ]*м[- ]*л[- ]*[ао][- ]*[а-яё-]*|м[- ]*р[- ]*а[- ]*з[- ]*[аоуий][- ]*|м[- ]*р[- ]*а[- ]*з[- ]*[ийь][- ]*|м[- ]*р[- ]*а[- ]*з[- ]*о[- ]*т[- ]*[а-яё-]*|а[- ]*у[- ]*т[- ]*[ий][- ]*с[- ]*т[- ]*[а-яё-]*|а[- ]*х[- ]*у[- ]*е[- ]*[а-яё-]*|д[- ]*е[- ]*г[- ]*е[- ]*н[- ]*е[- ]*р[- ]*а[- ]*т[- ]*[а-яё-]*|к[- ]*о[- ]*н[- ]*ч[- ]*[а-яё-]*)
)(?![а-яё])"""

PRONOUNS = ['я', 'ты', 'вы', 'он', 'она', 'оно', 'мы', 'они', 'вас', 'нас', 'их', 'его', 'её']
stopword_set = set(nltk.corpus.stopwords.words('russian'))
stopword_set = stopword_set.union({'это', 'который', 'весь', 'наш', 'свой', 'ещё', 'её', 'ваш', 'также', 'итак'})

words_semantics_dataset = pd.read_csv(KARTASLOVSENT_PATH, sep=";")
# term_to_tag_dict = dict(zip(words_semantics_dataset['term'], words_semantics_dataset['tag']))
term_to_tag_dict = {row['term']: [row['tag'], row['value']] for _, row in words_semantics_dataset.iterrows()}

lemmatizer = pymorphy3.MorphAnalyzer()

checker = SpellChecker(ORFO_DATASET_PATH)

